<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Añadir Pannellum -->
    <script src="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/styles.css">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
</head>
<body>

    <div id="header">
        <div id="usernameDisplay">User: </div>
        <div id="pointsDisplay">Points: 0</div>
    </div>

    <!-- Modal para mostrar el texto antes del mapa -->
    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="infoModalLabel">Important Information</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h1>Eco Exploradores of the Futuro</h1>
                    <p>This is our interactive map, where you can find natural places to explore.
                       By visiting them, you'll help take care of our planet by collecting litter
                       , taking water samples, and bringing them to our lab for studies.

                       With this data, we can develop plans to combat climate change.
                        
                       Remember, for every contribution, you'll earn points, which you can later exchange for rewards.</p>
                    <h3>Good luck and have fun exploring the world around us with your friends!</h3>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="acceptButton">Accept</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="congratsModal" tabindex="-1" aria-labelledby="congratsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="congratsModalLabel">Congratulations!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h2>You’ve completed a mission!</h2>
                    <p>You've earned 100 points for your contribution. Keep exploring to earn more points!</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">Accept</button>
                </div>
            </div>
        </div>
    </div>

    <div id="map" style="display: none;"></div>

    <div id="panorama" style="width: 100%; height: 400px; display: none;"></div>
    
    <button id="backToMap" style="display: none; position: absolute; top: 10px; left: 700px; z-index: 9999;" class="btn btn-secondary">Return to the Map</button>

    <div id="missionsPanel">
        <h3>Missions</h3>
        <ul>
            <li><input type="checkbox" class="mission-checkbox"> Mission 1: Explore the nearby area</li>
            <li><input type="checkbox" class="mission-checkbox"> Mission 2: Take photos of points of interest</li>
            <li><input type="checkbox" class="mission-checkbox"> Mission 3: Collect samples</li>
            <li><input type="checkbox" class="mission-checkbox"> Mission 4: Research the local flora and fauna</li>
        </ul>
        <button id="unlockButton" disabled>Complete</button>
        <button id="closeMissionsPanel">Close Missions</button>
    </div>

    <!-- Archivo de JavaScript externo -->
    <script src="/javascrip/mapa.js"></script>
</body>
</html>